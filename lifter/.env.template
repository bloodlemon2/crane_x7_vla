# ============================================================================
# Slurm SSH Configuration
# ============================================================================
# このファイルを .env にコピーして、環境に合わせて値をカスタマイズしてください
#
# 使い方:
#   cp .env.template .env
#   # .env を編集して設定を変更
#   ./submit.sh <job_script>
# ============================================================================

# ----------------------------------------------------------------------------
# API Keys
# ----------------------------------------------------------------------------
# Weights & Biases API key (実験トラッキング用)
# https://wandb.ai/settings で取得
WANDB_API_KEY=

# Hugging Face API token (モデルダウンロード用)
# https://huggingface.co/settings/tokens で取得
HF_TOKEN=

# ----------------------------------------------------------------------------
# SSH接続設定
# ----------------------------------------------------------------------------
# SSHホスト名またはIPアドレス (必須)
SLURM_SSH_HOST=

# SSHユーザー名 (必須)
SLURM_SSH_USER=

# SSHポート (デフォルト: 22)
SLURM_SSH_PORT=22

# SSH認証方式 (password または key)
# password: パスワード認証（実行時にパスワードを入力）
# key: 公開鍵認証
SLURM_SSH_AUTH=password

# SSH秘密鍵ファイルパス (SLURM_SSH_AUTH=key の場合に使用)
SLURM_SSH_KEY=~/.ssh/id_rsa

# ----------------------------------------------------------------------------
# リモートサーバー設定
# ----------------------------------------------------------------------------
# リモートサーバー上の作業ディレクトリ
SLURM_REMOTE_WORKDIR=~/crane_x7_vla

# ----------------------------------------------------------------------------
# Slurmデフォルト設定
# ----------------------------------------------------------------------------
# Slurmパーティション名
SLURM_PARTITION=gpu

# デフォルトGPU数
SLURM_GPUS=1

# GPUタイプ (例: a100, v100, h100)
# 空の場合は指定なし
SLURM_GPU_TYPE=

# デフォルト実行時間 (HH:MM:SS形式)
SLURM_TIME=24:00:00

# デフォルトメモリ (例: 32G, 64G)
SLURM_MEM=32G

# デフォルトCPU数
SLURM_CPUS=8

# ジョブ名のプレフィックス
SLURM_JOB_PREFIX=crane_x7

# コンテナイメージ (Pyxis/Enroot使用時)
# 例: noppdev/crane_x7_vla:latest
SLURM_CONTAINER=

# ----------------------------------------------------------------------------
# ジョブ待機設定 (wait コマンド用)
# ----------------------------------------------------------------------------
# 状態ポーリング間隔 (秒)
# ジョブの状態 (PENDING/RUNNING/COMPLETED等) を確認する間隔
SLURM_POLL_INTERVAL=60

# ログポーリング間隔 (秒)
# ジョブのstdoutログを取得する間隔
SLURM_LOG_POLL_INTERVAL=5

# 同時実行ジョブ数の上限 (Sweep用)
# 2以上を指定すると並列実行モードになり、リアルタイムログ表示が無効化されます
SLURM_MAX_CONCURRENT_JOBS=1

# ----------------------------------------------------------------------------
# W&B Sweep設定
# ----------------------------------------------------------------------------
# W&Bエンティティ (チーム名またはユーザー名)
# 空の場合はW&B APIからログインユーザーのデフォルトエンティティを自動取得
WANDB_ENTITY=

# W&Bプロジェクト名 (Sweep用)
WANDB_PROJECT=crane_x7_sweep

# ----------------------------------------------------------------------------
# トレーニング設定 (共通)
# ----------------------------------------------------------------------------
# データディレクトリ (リモートサーバー上のパス)
# OpenVLA: TFRecordディレクトリを直接指定
# OpenPI: LeRobot変換後のデータを使用（変換は自動実行）
DATA_ROOT=/root/vla/data/tfrecord_logs

# 出力ディレクトリ (リモートサーバー上のパス)
OUTPUT_DIR=/root/vla/outputs

# トレーニングステップ数
# OpenVLA: 10000程度
# OpenPI: 200000程度
MAX_STEPS=10000

# チェックポイント保存間隔 (ステップ数)
SAVE_INTERVAL=500

# 評価間隔 (ステップ数)
EVAL_INTERVAL=100

# 過学習チェック間隔 (ステップ数)
OVERFIT_CHECK_INTERVAL=500

# ----------------------------------------------------------------------------
# OpenPI固有設定
# ----------------------------------------------------------------------------
# LeRobotデータセット名 (TFRecordから変換時に使用)
LEROBOT_DATASET_NAME=crane_x7_openpi

# モデルタイプ: pi0, pi0_fast
MODEL_TYPE=pi0_fast

# アクションホライズン (予測するアクション数)
ACTION_HORIZON=50

# LoRAランク
LORA_RANK=32
