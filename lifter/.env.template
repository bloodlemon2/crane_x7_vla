# ============================================================================
# Lifter (Slurm Job Submission Tool) Configuration
# ============================================================================
# このファイルを .env にコピーして、環境に合わせて値をカスタマイズしてください
#
# 使い方:
#   cp .env.template .env
#   # .env を編集して設定を変更
#   lifter submit <job_script>
#   lifter sweep start <sweep_config.yaml>
# ============================================================================

# ----------------------------------------------------------------------------
# API Keys
# ----------------------------------------------------------------------------
# Weights & Biases API key (実験トラッキング用)
# https://wandb.ai/settings で取得
WANDB_API_KEY=

# Hugging Face API token (モデルダウンロード用)
# https://huggingface.co/settings/tokens で取得
HF_TOKEN=

# ----------------------------------------------------------------------------
# SSH接続設定
# ----------------------------------------------------------------------------
# SSHホスト名またはIPアドレス (必須)
SLURM_SSH_HOST=

# SSHユーザー名 (必須)
SLURM_SSH_USER=

# SSHポート (デフォルト: 22)
SLURM_SSH_PORT=22

# SSH認証方式 (password または key)
# password: パスワード認証（実行時にパスワードを入力）
# key: 公開鍵認証
SLURM_SSH_AUTH=password

# SSH秘密鍵ファイルパス (SLURM_SSH_AUTH=key の場合に使用)
SLURM_SSH_KEY=~/.ssh/id_rsa

# ----------------------------------------------------------------------------
# リモートサーバー設定
# ----------------------------------------------------------------------------
# リモートサーバー上の作業ディレクトリ
SLURM_REMOTE_WORKDIR=~/crane_x7_vla

# コンテナ内の作業ディレクトリ (Pyxis/Enroot使用時)
SLURM_CONTAINER_WORKDIR=/workspace

# ----------------------------------------------------------------------------
# Git リポジトリ設定
# ----------------------------------------------------------------------------
# リポジトリURL
# ジョブ実行時にリポジトリをクローン/更新して最新コードを使用
GIT_REPO_URL=https://github.com/NOPLAB/crane_x7_vla.git

# ブランチ名 (デフォルト: main)
GIT_BRANCH=main

# 特定のコミットハッシュまたはタグ (オプション)
# 指定しない場合はブランチのHEADを使用
# GIT_REF=

# ----------------------------------------------------------------------------
# Slurmデフォルト設定
# ----------------------------------------------------------------------------
# Slurmパーティション名
SLURM_PARTITION=gpu

# デフォルトGPU数
SLURM_GPUS=1

# GPUタイプ (例: a100, v100, h100)
# 空の場合は指定なし
SLURM_GPU_TYPE=

# デフォルト実行時間 (HH:MM:SS形式)
SLURM_TIME=24:00:00

# デフォルトメモリ (例: 32G, 64G)
SLURM_MEM=32G

# デフォルトCPU数
SLURM_CPUS=8

# ジョブ名のプレフィックス
SLURM_JOB_PREFIX=crane_x7

# コンテナイメージ (Pyxis/Enroot使用時)
# 例: noppdev/crane_x7_vla:latest
SLURM_CONTAINER=

# ----------------------------------------------------------------------------
# ジョブ待機設定 (wait コマンド用)
# ----------------------------------------------------------------------------
# 状態ポーリング間隔 (秒)
SLURM_POLL_INTERVAL=60

# ログポーリング間隔 (秒)
SLURM_LOG_POLL_INTERVAL=5

# 同時実行ジョブ数の上限 (Sweep用)
# 2以上を指定すると並列実行モードになり、リアルタイムログ表示が無効化されます
SLURM_MAX_CONCURRENT_JOBS=1

# ----------------------------------------------------------------------------
# W&B設定
# ----------------------------------------------------------------------------
# W&Bエンティティ (チーム名またはユーザー名)
# 空の場合はW&B APIからログインユーザーのデフォルトエンティティを自動取得
WANDB_ENTITY=

# W&Bプロジェクト名
WANDB_PROJECT=crane_x7_sweep

# ----------------------------------------------------------------------------
# トレーニング設定
# ----------------------------------------------------------------------------
# データディレクトリ (リモートサーバー上のパス)
# TFRecordディレクトリを直接指定
DATA_ROOT=/root/vla/data/tfrecord_logs

# 出力ディレクトリ (リモートサーバー上のパス)
OUTPUT_DIR=/root/vla/outputs

# トレーニングステップ数
MAX_STEPS=10000

# チェックポイント保存間隔 (ステップ数)
SAVE_INTERVAL=500

# 評価間隔 (ステップ数)
EVAL_INTERVAL=100

# 過学習チェック間隔 (ステップ数)
OVERFIT_CHECK_INTERVAL=500

# ----------------------------------------------------------------------------
# Pi0/Pi0.5 設定
# ----------------------------------------------------------------------------
# OpenPIチェックポイント名
# 利用可能なチェックポイント:
#   - pi0_base: Pi0ベースモデル (ファインチューニング用)
#   - pi05_base: Pi0.5ベースモデル (ファインチューニング用)
#   - pi0_droid: Pi0 DROID fine-tuned
#   - pi05_droid: Pi0.5 DROID fine-tuned
#   - pi0_aloha_towel: Pi0 ALOHA towel task
# これらは10k+時間のロボットデータで事前学習済み
OPENPI_CHECKPOINT=pi0_base

# チェックポイントダウンロードをスキップするか
# true: ダウンロードをスキップ (既にキャッシュ済みの場合)
# false: 必要に応じてダウンロード (デフォルト)
SKIP_OPENPI_DOWNLOAD=false
