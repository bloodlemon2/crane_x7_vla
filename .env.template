# ============================================================================
# CRANE-X7 環境設定テンプレート
# ============================================================================
# このファイルを .env にコピーして、環境に合わせて値をカスタマイズしてください
#
# 使い方:
#   cp .env.template .env
#   # .env を編集して設定を変更
#   docker compose --profile <プロファイル名> up
#
# 利用可能なプロファイル:
#   real           - 実機制御
#   sim            - Gazeboシミュレーション
#   teleop         - テレオペレーション（リーダー + フォロワー）
#   log            - テレオペレーション + カメラ + データロガー
#   vla            - VLA推論（実機）
#   vla-sim        - VLA推論（シミュレーション）
#   lift           - Liftシミュレーション
#   lift-vla       - Lift + VLA推論
#   lift-logger    - Lift + データロガー
#   vla-rl         - VLA-RLトレーニング
#   vla-rl-dev     - VLA-RL開発モード
#   rosbridge      - rosbridgeサーバー（実機）
#   rosbridge-sim  - rosbridgeサーバー（シミュレーション）
#   remote-inference - リモートGPU推論クライアント
#   lerobot        - LeRobot開発シェル
#   lerobot-train  - LeRobotトレーニング
# ============================================================================

# ############################################################################
# 共通設定（全サービスで使用）
# ############################################################################

# ----------------------------------------------------------------------------
# ディスプレイ設定
# ----------------------------------------------------------------------------
# GUIアプリケーション（RViz、Gazebo）用のX11ディスプレイ
# WSL2の場合: :0 を使用
# ネイティブLinuxの場合: ディスプレイに応じて :0 または :1 を使用
DISPLAY=:0

# ----------------------------------------------------------------------------
# コンテナユーザー設定
# ----------------------------------------------------------------------------
# コンテナ内のホームディレクトリ名として使用
# HF_HOMEのパス（/home/${USERNAME}/.cache/huggingface）に影響
# デフォルト: ros2
USERNAME=ros2

# ----------------------------------------------------------------------------
# Hugging Face キャッシュディレクトリ（ホスト側パス）
# ----------------------------------------------------------------------------
# モデルをキャッシュしてコンテナ再起動時の再ダウンロードを防止
# デフォルト: $HOME/.cache/huggingface
# HF_CACHE_DIR=/home/youruser/.cache/huggingface

# ############################################################################
# プロファイル: real（実機制御）
# ############################################################################

# USBデバイス設定
# 利用可能なデバイスを確認: ls -l /dev/ttyUSB*
USB_DEVICE=/dev/ttyUSB0

# RealSense D435 を使用するかどうか
# true: D435カメラを使用
# false: カメラなしで動作
USE_D435=false

# RViz ビューアを表示するかどうか
# true: RVizでロボットの状態を可視化
# false: ヘッドレスモード
USE_VIEWER=false

# ############################################################################
# プロファイル: sim（Gazeboシミュレーション）
# ############################################################################

# USE_VIEWER と同じ変数を使用（上記参照）

# ############################################################################
# プロファイル: teleop, log（テレオペレーション）
# ############################################################################

# Followerロボット用のUSBデバイス（2台のロボットでテレオペレーションする場合）
USB_DEVICE_FOLLOWER=/dev/ttyUSB1

# Intel RealSense D435 カメラのシリアル番号
# シリアル番号の確認方法: rs-enumerate-devices | grep "Serial Number"
# 未指定の場合は最初に検出されたカメラを使用
CAMERA_SERIAL=

# 2台目のカメラシリアル番号（マルチカメラ構成の場合）
CAMERA2_SERIAL=

# ############################################################################
# プロファイル: vla, vla-sim（VLA推論）
# ############################################################################

# Hugging Face トークン（モデルダウンロード用）
# 取得方法: https://huggingface.co/settings/tokens
HF_TOKEN=

# VLAモデルパス（必須）
# ファインチューニング済みモデルのパスを指定
# 例: /workspace/vla/outputs/<model_dir>/checkpoint-1500
VLA_MODEL_PATH=

# VLAタスク指示（自然言語）
# ロボットに実行させるタスクを自然言語で指定
# 例: "pick up the red block", "move the cup to the left"
# デフォルト: pick up the object
VLA_TASK_INSTRUCTION=pick up the object

# VLA推論デバイス
# cuda: GPU使用（推奨）
# cpu: CPU使用（遅いが、GPU不要）
# デフォルト: cuda
VLA_DEVICE=cuda

# ############################################################################
# プロファイル: lift, lift-vla, lift-logger（Liftシミュレーション）
# ############################################################################

# シミュレータ選択
# maniskill: ManiSkill 3.0ベース（安定、推奨）
# genesis: Genesis 0.3.x ベース（高速、GPU推奨）
# デフォルト: maniskill
LIFT_SIMULATOR=maniskill

# シミュレーションバックエンド
# gpu: GPU使用（高速、レンダリング可能）
# cpu: CPU使用（GPUなし環境用）
# デフォルト: cpu
LIFT_BACKEND=cpu

# レンダリングモード
# rgb_array: 画像観測を取得（GPU必須）
# human: GUIウィンドウ表示（GPU必須）
# none: レンダリングなし（CPU可）
# デフォルト: none
LIFT_RENDER_MODE=none

# ############################################################################
# プロファイル: vla-rl, vla-rl-dev（VLA強化学習）
# ############################################################################

# 並列環境数
# GPU VRAMに応じて調整（8GB: 2-4、24GB: 8-16）
# デフォルト: 4
VLA_RL_NUM_ENVS=4

# LIFT_SIMULATOR, LIFT_BACKEND は上記と同じ変数を使用
# WANDB_API_KEY, HF_TOKEN は下記と同じ変数を使用

# ############################################################################
# プロファイル: rosbridge, rosbridge-sim（rosbridge WebSocketサーバー）
# ############################################################################

# rosbridge_serverのWebSocketポート
# リモートGPUサーバーからこのポートに接続します
# デフォルト: 9090
ROSBRIDGE_PORT=9090

# ############################################################################
# プロファイル: remote-inference（リモートGPU推論）
# ############################################################################

# Tailscale認証キー（リモートVLA推論時に必須）
# 取得方法: https://login.tailscale.com/admin/settings/keys
# - "Generate auth key" をクリック
# - Reusable: ON（複数デバイスで使用する場合）
# - Ephemeral: ON（推奨 - コンテナ終了時に自動削除）
TS_AUTHKEY=

# Tailscale userspace networking モード
# true: /dev/net/tun なしで動作（制限環境用）
# false: 通常のTUNデバイスを使用（ローカル側、推奨）
# デフォルト: false
TS_USERSPACE=false

# Tailscaleホスト名（リモート推論サーバー側）
# MagicDNS名としてTailnetworkで使用
# デフォルト: crane-x7-inference
TS_HOSTNAME=crane-x7-inference

# rosbridgeホスト名（ローカルロボット側のTailscale MagicDNS名）
# リモート推論サーバーからこの名前で接続
# デフォルト: crane-x7-local
ROSBRIDGE_HOST=crane-x7-local

# VLA推論レート (Hz)
# リモート推論サービスで使用
# デフォルト: 10.0
VLA_INFERENCE_RATE=10.0

# VLA_MODEL_PATH, VLA_TASK_INSTRUCTION, VLA_DEVICE は上記と同じ変数を使用
# HF_TOKEN は下記と同じ変数を使用

# ############################################################################
# プロファイル: lerobot, lerobot-train（LeRobot）
# ############################################################################

# LeRobotポリシーのパス（推論時に使用）
# 学習済みポリシーのディレクトリを指定
# 例: outputs/act_crane_x7/checkpoint_final
LEROBOT_POLICY_PATH=

# HF_TOKEN, WANDB_API_KEY は下記と同じ変数を使用

# ############################################################################
# 外部サービス認証情報
# ############################################################################

# ----------------------------------------------------------------------------
# Weights & Biases設定（トレーニング用）
# ----------------------------------------------------------------------------
# W&B APIキー（トレーニングログ用）
# 取得方法: https://wandb.ai/settings
# 使用プロファイル: vla-rl, vla-rl-dev, lerobot-train
WANDB_API_KEY=

# ----------------------------------------------------------------------------
# ROS 2 設定（オプション）
# ----------------------------------------------------------------------------
# DDS通信用のROS 2 Domain ID
# 複数マシンでテレオペレーションする場合は、すべてのマシンで同じ値を使用
# 有効範囲: 0-101 (デフォルト: 42)
ROS_DOMAIN_ID=42
